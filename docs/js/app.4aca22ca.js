(function(t){function e(e){for(var n,i,r=e[0],c=e[1],l=e[2],u=0,f=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&f.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),o()}function o(){for(var t,e=0;e<a.length;e++){for(var o=a[e],n=!0,r=1;r<o.length;r++){var c=o[r];0!==s[c]&&(n=!1)}n&&(a.splice(e--,1),t=i(i.s=o[0]))}return t}var n={},s={app:0},a=[];function i(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=n,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var d=c;a.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var n=o("64a9"),s=o.n(n);s.a},"3cdb":function(t,e,o){"use strict";var n=o("61b3"),s=o.n(n);s.a},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("f751"),o("097d");var n=o("2b0e"),s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("router-view")],1)},a=[],i={name:"App"},r=i,c=(o("034f"),o("2877")),l=Object(c["a"])(r,s,a,!1,null,null,null),d=l.exports,u=o("9483");Object(u["a"])("".concat("","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var f=o("8c4f"),v=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("div",{staticClass:"fix-top"},[o("form",{staticClass:"input-form",on:{submit:function(e){return e.preventDefault(),t.doAdd(e)}}},[o("label",{staticClass:"form-label",attrs:{for:"comment"}},[t._v("Todo")]),o("input",{ref:"comment",staticClass:"input-comment flex-grow-1",attrs:{type:"text",id:"comment"}}),o("button",{staticClass:"btn-regular",attrs:{type:"submit"}},[t._v("OK")])]),o("div",{staticClass:"status-boxes"},[o("label",[o("input",{attrs:{type:"checkbox"},domProps:{checked:t.isAllSelected},on:{click:t.selectAll}}),o("span",{staticClass:"status-label"},[t._v("All")]),o("span",{staticClass:"badge",class:t.badgeColor(-1)},[t._v("\n          "+t._s(t.todoCounts(-1))+"\n        ")])]),t._l(t.options,(function(e){return o("label",{key:e.value},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.filterOption,expression:"filterOption"}],attrs:{type:"checkbox"},domProps:{value:e.value,checked:Array.isArray(t.filterOption)?t._i(t.filterOption,e.value)>-1:t.filterOption},on:{change:function(o){var n=t.filterOption,s=o.target,a=!!s.checked;if(Array.isArray(n)){var i=e.value,r=t._i(n,i);s.checked?r<0&&(t.filterOption=n.concat([i])):r>-1&&(t.filterOption=n.slice(0,r).concat(n.slice(r+1)))}else t.filterOption=a}}}),o("span",{staticClass:"status-label"},[t._v(t._s(e.label))]),o("span",{staticClass:"badge",class:t.badgeColor(e.value)},[t._v("\n          "+t._s(t.todoCounts(e.value))+"\n        ")])])})),o("button",{staticClass:"btn-red",on:{click:t.deleteDone}},[t._v("Clear Done")]),o("button",{staticClass:"btn-switch-green",class:{"switch-on":t.canRemove},on:{click:function(e){t.canRemove=!t.canRemove}}},[t._v("Edit")])],2)]),o("div",{staticClass:"main-content"},[o("div",{staticClass:"list-group"},[o("draggable",{attrs:{handle:".move-icon"},on:{end:t.onDragEnd},model:{value:t.filteredTodos,callback:function(e){t.filteredTodos=e},expression:"filteredTodos"}},t._l(t.filteredTodos,(function(e){return o("todo-item",{key:e.id,staticClass:"list-group-item list-style",attrs:{todo:e,canRemove:t.canRemove},on:{changeState:t.doChangeState,edit:t.editComment,remove:t.doRemove}})})),1)],1)]),t.isModal?o("modal-dialog",{attrs:{todo:t.editingItem},on:{close:t.closeModal}}):t._e()],1)},m=[],p=(o("ac6a"),o("8615"),o("310e")),h=o.n(p),b={Todo:{value:0,label:"Todo"},InProgress:{value:1,label:"In Progress"},Done:{value:2,label:"Done"}};function g(t){switch(t){case b.Todo.value:return"badge-light circle-button-border";case b.InProgress.value:return"badge-warning";case b.Done.value:return"badge-success";default:return"badge-info"}}var E=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"flex-container"},[o("div",{staticClass:"move-icon"},[o("font-awesome-icon",{attrs:{icon:"ellipsis-v",size:"xs"}})],1),o("div",{on:{click:t.changeEventHandler}},[o("span",{staticClass:"circle-button pointer",class:t.badgeColor(t.todo.state)})]),o("div",{staticClass:"flex-grow-1 no-wrap todo-text",attrs:{title:t.todo.comment}},[t._v("\n      "+t._s(t.todo.comment)+"\n    ")]),o("div",{on:{click:t.editEventHandler}},[o("font-awesome-icon",{staticClass:"pointer",attrs:{icon:"edit",size:"xs"}})],1),o("transition",{attrs:{name:"slide-fade"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.canRemove,expression:"canRemove"}],on:{click:t.removeEventHandler}},[o("span",{staticClass:"pointer"},[t._v("×")])])])],1)])},_=[],O={name:"todo-item",props:{todo:Object,canRemove:Boolean},data:function(){return{}},methods:{changeEventHandler:function(){this.$emit("changeState",this.todo.id)},badgeColor:function(t){return g(t)},editEventHandler:function(){this.$emit("edit",this.todo.id)},removeEventHandler:function(){this.$emit("remove",this.todo.id)}}},A=O,T=(o("6959"),Object(c["a"])(A,E,_,!1,null,null,null)),C=T.exports,D=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"dummy",attrs:{tabindex:"0"}}),o("div",{staticClass:"modal-body"},[o("div",{staticClass:"status-labels"},t._l(t.options,(function(e){return o("label",{key:e.value,staticClass:"status-label"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.state,expression:"state"}],attrs:{type:"radio"},domProps:{value:e.value,checked:t._q(t.state,e.value)},on:{change:function(o){t.state=e.value}}}),o("span",{},[t._v(t._s(e.label))])])})),0)]),o("div",{staticClass:"modal-body"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],ref:"modalcomment",staticClass:"input-text",attrs:{type:"text"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),o("div",{staticClass:"modal-body"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.note,expression:"note"}],attrs:{maxlength:"1000",rows:"3"},domProps:{value:t.note},on:{input:function(e){e.target.composing||(t.note=e.target.value)}}})]),o("div",{staticClass:"modal-footer"},[o("button",{staticClass:"btn-regular modal-default-button",on:{click:t.update}},[t._v("OK")]),o("button",{staticClass:"btn-gray modal-default-button",on:{click:t.cancel}},[t._v("キャンセル")])]),o("div",{staticClass:"dummy",attrs:{tabindex:"0"}})])])])])},S=[],w={ADD_TASK:"ADD_TASK",REMOVE_TASK:"REMOVE_TASK",CHANGE_STATE:"CHANGE_STATE",UPDATE_TASK:"UPDATE_TASK",CHANGE_ORDER:"CHANGE_ORDER",DELETE_DONE:"DELETE_DONE"},x={name:"modal-dialog",props:{todo:Object},data:function(){return{comment:"",note:"",state:"",options:Object.values(b)}},methods:{update:function(){this.todo["comment"]=this.comment,this.todo["note"]=this.note,this.todo["state"]=this.state,this.$store.dispatch(w.UPDATE_TASK,this.todo),this.$emit("close")},cancel:function(){this.$emit("close")},checkFocus:function(t){null!==t.target&&"dummy"==t.target.className&&this.$refs.modalcomment.focus()}},created:function(){this.comment=this.todo.comment,this.note=this.todo.note||"",this.state=this.todo.state,document.addEventListener("focusin",this.checkFocus,!1)},mounted:function(){this.$refs.modalcomment.focus()},beforeDestroy:function(){document.removeEventListener("focusin",this.checkFocus,!1)}},y=x,k=(o("805b"),Object(c["a"])(y,D,S,!1,null,"1cce0bee",null)),j=k.exports,I={name:"TodoList",components:{draggable:h.a,TodoItem:C,ModalDialog:j},data:function(){return{options:Object.values(b),filterOption:[b.Todo.value,b.InProgress.value],isAllSelected:!1,isModal:!1,editingItem:null,canRemove:!1}},methods:{doAdd:function(t,e){var o=this.$refs.comment;o.value.length&&(this.$store.dispatch(w.ADD_TASK,o.value),o.value="")},doChangeState:function(t){this.$store.dispatch(w.CHANGE_STATE,t)},doRemove:function(t){this.$store.dispatch(w.REMOVE_TASK,t)},editComment:function(t){this.isModal=!0,this.editingItem=this.$store.getters.getTodoById(t)},closeModal:function(){this.isModal=!1,this.editingItem=null},todoCounts:function(t){return this.$store.getters.getTaskCount(t)},badgeColor:function(t){return g(t)},onDragEnd:function(t){if(t.oldIndex!=t.newIndex){var e={oldIndex:t.oldIndex,newIndex:t.newIndex,option:this.filterOption,isAllSelected:this.isAllSelected};this.$store.dispatch(w.CHANGE_ORDER,e)}},selectAll:function(){var t=this;this.isAllSelected?(this.filterOption=[],this.isAllSelected=!1):(this.filterOption=[],this.options.forEach((function(e){return t.filterOption.push(e.value)})),this.isAllSelected=!0)},deleteDone:function(){this.$store.dispatch(w.DELETE_DONE)}},watch:{filterOption:function(t){this.isAllSelected=t.length===this.options.length}},computed:{filteredTodos:{get:function(){return this.$store.getters.getFilteredTodos(this.filterOption,this.isAllSelected)},set:function(t){}}}},N=I,R=(o("3cdb"),Object(c["a"])(N,v,m,!1,null,"7c22d7f0",null)),P=R.exports;n["a"].use(f["a"]);var $,K,H=new f["a"]({routes:[{path:"/",name:"TodoList",component:P}]}),M=o("bd86"),G=(o("20d6"),o("6762"),o("2fdb"),o("2f62")),L=o("d225"),U=o("b0b4"),F="vue-todolist",V=function(){function t(){Object(L["a"])(this,t)}return Object(U["a"])(t,null,[{key:"fetch",value:function(){var t=JSON.parse(localStorage.getItem(F)||"[]");return t.forEach((function(t){t["note"]=t.note||""})),t}},{key:"save",value:function(t){localStorage.setItem(F,JSON.stringify(t))}}]),t}(),B=function t(e,o,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";Object(L["a"])(this,t),this.id=e,this.comment=o,this.state=n,this.note=s};function J(t,e,o){return!1===o?t.filter((function(t){return e.includes(t.state)})):t.concat()}n["a"].use(G["a"]);var q=new G["a"].Store({state:{todos:V.fetch(),lastUid:0},getters:{getFilteredTodos:function(t){return function(e,o){return J(t.todos,e,o)}},getTodoById:function(t){return function(e){var o=t.todos.findIndex((function(t){return t.id===e}));return t.todos[o]}},getTaskCount:function(t){return function(e){return t.todos.filter((function(t){return-1===e||t.state===e})).length}}},mutations:($={},Object(M["a"])($,w.ADD_TASK,(function(t,e){t.todos.length>0&&(t.lastUid=t.todos.reduce((function(t,e){return t.id>e.id?t:e})).id);var o=new B(t.lastUid+1,e.data,b.Todo.value);t.todos.push(o),V.save(t.todos)})),Object(M["a"])($,w.REMOVE_TASK,(function(t,e){var o=t.todos.findIndex((function(t){return t.id===e.data}));t.todos.splice(o,1),V.save(t.todos)})),Object(M["a"])($,w.CHANGE_STATE,(function(t,e){var o=t.todos.findIndex((function(t){return t.id===e.data})),n=t.todos[o];switch(n.state){case b.Todo.value:n.state=b.InProgress.value;break;case b.InProgress.value:n.state=b.Done.value;break;case b.Done.value:n.state=b.Todo.value;break}V.save(t.todos)})),Object(M["a"])($,w.UPDATE_TASK,(function(t,e){var o=t.todos.findIndex((function(t){return t.id===e.data.id}));t.todos[o]=e.data,V.save(t.todos)})),Object(M["a"])($,w.CHANGE_ORDER,(function(t,e){var o=t.todos.findIndex((function(t){return t.id===e.src.id})),n=t.todos.findIndex((function(t){return t.id===e.dest.id}));t.todos.splice(o,1),t.todos.splice(n,0,e.src),V.save(t.todos)})),Object(M["a"])($,w.DELETE_DONE,(function(t){var e=[b.Todo.value,b.InProgress.value];t.todos=J(t.todos,e,!1),V.save(t.todos)})),$),actions:(K={},Object(M["a"])(K,w.ADD_TASK,(function(t,e){var o=t.commit;o(w.ADD_TASK,{data:e})})),Object(M["a"])(K,w.REMOVE_TASK,(function(t,e){var o=t.commit;o(w.REMOVE_TASK,{data:e})})),Object(M["a"])(K,w.CHANGE_STATE,(function(t,e){var o=t.commit;o(w.CHANGE_STATE,{data:e})})),Object(M["a"])(K,w.UPDATE_TASK,(function(t,e){var o=t.commit;o(w.UPDATE_TASK,{data:e})})),Object(M["a"])(K,w.CHANGE_ORDER,(function(t,e){var o=t.getters.getFilteredTodos(e.option,e.isAllSelected),n=o[e.oldIndex],s=o[e.newIndex];t.commit(w.CHANGE_ORDER,{src:n,dest:s})})),Object(M["a"])(K,w.DELETE_DONE,(function(t){var e=t.commit;e(w.DELETE_DONE)})),K)}),z=o("ecee"),Q=o("c074"),W=o("ad3d");z["c"].add(Q["b"],Q["a"]),n["a"].component("font-awesome-icon",W["a"]),n["a"].config.productionTip=!1,new n["a"]({router:H,store:q,render:function(t){return t(d)}}).$mount("#app")},"61b3":function(t,e,o){},"64a9":function(t,e,o){},6959:function(t,e,o){"use strict";var n=o("e074"),s=o.n(n);s.a},"805b":function(t,e,o){"use strict";var n=o("c416"),s=o.n(n);s.a},c416:function(t,e,o){},e074:function(t,e,o){}});
//# sourceMappingURL=app.4aca22ca.js.map